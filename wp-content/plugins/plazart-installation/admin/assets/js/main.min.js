!function(t){"use strict";t(document).ready(function(){function a(a,i,s="install"){var n=t(a);if(!n.hasClass("importing")){var l={action:"plzinst_plugin_action",plugin:n.data("plugin"),_nonce:n.data("nonce")},d=n.closest(".item").find("input[type=checkbox]"),o=t('<span class="spinner-border spinner-border-sm mr-1"></span>');l.page=plzinstAdminSettings.page,"update"===s?(l["tgmpa-update"]="update-plugin",l["tgmpa-nonce"]=n.data("tgmpa-update_nonce")):"activate"===s?(l["tgmpa-activate"]="activate-plugin",l["tgmpa-nonce"]=n.data("tgmpa-activate_nonce")):(l["tgmpa-install"]="install-plugin",l["tgmpa-nonce"]=n.data("tgmpa_nonce")),void 0!==n.closest(".plzinst-plugin__install").data("plugin-passed")&&(l.passed=n.closest(".plzinst-plugin__install").data("plugin-passed")),d.prop("checked",!0),n.addClass("importing"),n.find("> .spinner-border").length||o.prependTo(n),t.get(ajaxurl,l,function(a){var i=t("<div></div>"),l=n.closest(".modal").find("[data-import-message-box]");i.append(a);var p={},c=!1;i.find("[data-plzinst-install-plugin-message]")&&i.find("[data-plzinst-install-plugin-message]").length?(p=JSON.parse(i.find("[data-plzinst-install-plugin-message]").text())).success?(p.activate?n.removeClass("text-danger install text-info update text-success activated").addClass("text-primary activate").html(plzinstAdminSettings.l10nStrings.activate):p.activated&&n.removeClass("text-danger install text-info update text-primary activate").addClass("text-success activated").html(plzinstAdminSettings.l10nStrings.activated),p.message&&!e(s)&&l.html('<div class="alert alert-success rounded-0">'+p.message+"</div>"),void 0!==p.passed&&n.parents(".plzinst-plugin__install").data("plugin-passed",p.passed)):(c=!0,p.install?n.removeClass("text-info update text-primary activate text-success activated").addClass("text-danger install").html(plzinstAdminSettings.l10nStrings.install):p.update?n.removeClass("text-danger install text-primary activate text-success activated").addClass("text-info update").html(plzinstAdminSettings.l10nStrings.update):p.activate&&n.removeClass("text-danger install text-info update text-success activated").addClass("text-primary activate").html(plzinstAdminSettings.l10nStrings.activate),p.message?l.html('<div class="alert alert-danger rounded-0">'+p.message+"</div>"):l.html('<div class="alert alert-danger rounded-0">'+i.find(".wrap").find("> p:last-child").remove().end().html()+"</div>")):n.removeClass("text-danger install").addClass("text-success activated").html(plzinstAdminSettings.l10nStrings.activated),n.hasClass("activated")&&d.is(":checked")&&d.prop("disabled",!0),n.removeClass("importing").find(o).remove(),t(".plzinst-plugin__install input[data-checkbox-plugin-all]").data("clicked",!1),e(s)&&!c?t(".js-plzinst-plugin__"+s+"-all").trigger("click"):e(s)||t(".js-plzinst-plugin__"+s+"-all").addClass("d-none")},"html").fail(function(t,a,e){n.closest(".modal").find("[data-import-message-box]").html('<div class="alert alert-danger rounded-0">'+e+": "+t.responseText+"</div>")})}}!function(){var a,e,i=null,s=t("[data-plzinst-active-license]");if("undefined"!=typeof plzinst_license_ajax)try{i=plzinst_license_ajax.license_active}catch(t){}if(null!=i){var n=t("<html>"),l=t("<head>"),d=t("<body>");n.append(l).append(d);var o=t("<link>").attr({rel:"stylesheet",href:i.api+"/components/com_tz_envato_license/css/style.css"});l.append(o),l.append("<title>"+plzinst_license_ajax.strings.theme_active_title+"</title>");var p=t('<form style="display:none;">').attr({action:i.api+"/index.php?option=com_tz_envato_license&view=activation",method:"POST",enctype:"multipart/form-data",id:i.productname.toLowerCase()+"-activate-product-form",acceptCharset:"ISO-8859-1"}).append('<div class="'+i.productname.toLowerCase()+'-activation-loading"><div class="'+i.productname.toLowerCase()+'-activation-loading-content"><h2>'+plzinst_license_ajax.strings.loading+"</h2><p>"+plzinst_license_ajax.strings.loading_desc+"</p></div></div>");for(var c in i)t("<input>").attr({type:"hidden",name:c,value:i[c]}).appendTo(p);d.append(p);var r=function(){var t=window.navigator.userAgent,a=t.indexOf("MSIE ");if(a>0)return parseInt(t.substring(a+5,t.indexOf(".",a)),10);if(t.indexOf("Trident/")>0){var e=t.indexOf("rv:");return parseInt(t.substring(e+3,t.indexOf(".",e)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}();r&&(p.attr("target","plzinstProductActivationWindow"),p.appendTo(t(document.body)));var m=function(){var i=n.clone(),s=i.find("form"),l=r?550:350,d=screen.width/2-300,o=screen.height/2-l/2;a=window.open("","plzinstProductActivationWindow","width=600, height="+l+", top="+o+", left="+d),r?p.submit():t(a.document.body).append(i),a?r||i.find("link").on("load",function(){s.show(),setTimeout(function(){l=800,a.resizeTo(600,l),a.moveBy(0,-200),s.submit()},1100)}):alert(plzinst_license_ajax.strings.browser_warning),window.clearInterval(e),e=setInterval(function(){if(r)try{a.parent}catch(t){window.clearInterval(e),window.location.reload()}else a.parent||(window.clearInterval(e),window.location.reload())},300)};s.on("click",function(t){t.preventDefault(),m()}),t("[data-plzinst-reactivate-license]").on("click",function(t){t.preventDefault(),m()})}t("[data-plzinst-delete-license]").on("click",function(a){var e=t(this);if(confirm(plzinst_license_ajax.strings.delete_question)){var i={action:"ajax_deactivate_license"};return i.page=plzinst_license_ajax.page,t.ajax({url:plzinst_license_ajax.admin_ajax_url,type:"POST",dataType:"JSON",data:i,beforeSend:function(){e.find("> span:first-child").removeClass("dashicons dashicons-no").addClass(plzinst_license_ajax.loading_class_icon)},success:function(t){t.success&&t.redirect&&(window.location.href=t.redirect)}}),1}})}(),t(".js-plzinst-plugin__install").on("click",function(e){e.preventDefault();var i=t(this);i.hasClass("importing")||i.hasClass("activated")||(i.hasClass("activate")?a(this,0,"activate"):i.hasClass("install")?a(this):i.hasClass("update")&&a(this,0,"update"))}),t(".plzinst-plugin__install [data-plugin-item] input[type=checkbox]").on("change",function(){var a=t(this);a.is(":checked")?a.closest("[data-plugin-item]").addClass("checked"):(a.closest("[data-plugin-item]").removeClass("checked"),t(".plzinst-plugin__install input[data-checkbox-plugin-all]").prop("checked",!1)),e("install")?t(".js-plzinst-plugin__install-all").removeClass("d-none"):t(".js-plzinst-plugin__install-all").addClass("d-none"),e("update")?t(".js-plzinst-plugin__update-all").removeClass("d-none"):t(".js-plzinst-plugin__update-all").addClass("d-none"),e("activate")?t(".js-plzinst-plugin__activate-all").removeClass("d-none"):t(".js-plzinst-plugin__activate-all").addClass("d-none")}),t(".plzinst-plugin__install input[data-checkbox-plugin-all]").on("change",function(a){var e=t(this),i=e.closest(".plzinst-plugin__install");e.is(":checked")?i.find("[data-plugin-item] input[type=checkbox]:not(:disabled)").prop("checked",!0).trigger("change"):i.find("[data-plugin-item] input[type=checkbox]:not(:disabled)").prop("checked",!1).trigger("change")});var e=function(a="install"){var e=t(".plzinst-plugin__install [data-plugin-item].checked");return e.length?e.find(".js-plzinst-plugin__install."+a).length:0},i=function(t,a){var e=t.closest(".item").find("input[data-checkbox-plugin-all]");if(!e.data("clicked")){e.data("clicked",!0);var i=t.closest(".plzinst-plugin__install").find("[data-plugin-item] input[type=checkbox]:checked:not(:disabled)"),s=0;if(i.length){for(var n=i.eq(s),l=n.closest("[data-plugin-item]").find(".js-plzinst-plugin__install."+a);!l.length;)l=(n=i.eq(s)).closest("[data-plugin-item]").find(".js-plzinst-plugin__install."+a),s++;l.length&&l.trigger("click")}}};t(".js-plzinst-plugin__install-all").on("click",function(a){a.preventDefault(),i(t(this),"install")}),t(".js-plzinst-plugin__update-all").on("click",function(a){a.preventDefault(),i(t(this),"update")}),t(".js-plzinst-plugin__activate-all").on("click",function(a){a.preventDefault(),i(t(this),"activate")}),t(".js-plzinst-import").on("click",function(a){a.preventDefault();var e=t(this),i=e.closest(".modal"),s=i.find("form[data-demo-id]"),n=e.closest(".item").find("input[type=checkbox]"),l=s.find(".js-plzinst-demo-item:not(.is-finished) input[data-pack-type]:checked").length,d=s.find(".js-plzinst-demo-item input[data-pack-type]:checked").length,o=e.closest(".modal-footer").find(".js-processing-box .progress-bar");e.hasClass("importing")||l&&(n.prop("checked",!0),i.off("click.dismiss.bs.modal",'[data-dismiss="modal"]'),i.off(),e.addClass("disabled importing").closest(".modal-footer").find(".processing-box").removeClass("d-none"),s.find("input[data-pack-type]").prop("disabled",!0),100===parseInt(o[0].style.width)&&o.removeClass("bg-success").css("width","0%"),o.parent().css("padding-right",0),i.find("[data-plzinst-stop-importing]").removeClass("d-none"),function a(e,i,s,n,l,d){var o=100/l;if(s.find(".js-plzinst-demo-item:not(.is-finished) input[data-pack-type]:checked").length){var p=s.find(".js-plzinst-demo-item:not(.is-finished) input[data-pack-type]:checked").first(),c=p.closest(".js-plzinst-demo-item:not(.is-finished)");if(p.length){var r=e,m=i.closest(".modal"),u=i.closest(".modal").find("[data-import-message-box]"),g=i.closest(".modal-footer").find(".js-processing-box .progress-bar");Object.keys(r).length||(r={action:"plzinst_import_demo_data",page:plzinstAdminSettings.page,security:plzinstAdminSettings.demoImportNonce,action_import:"download",pack:s.data("demo-id"),pack_type:p.data("pack-type")},void 0!==p.data("parent-slug")&&(r.pack=p.data("parent-slug"),r.pack_main=s.data("demo-id")),void 0!==p.data("demo-title")&&(r.demo_title=p.data("demo-title")),void 0!==p.data("demo-type")&&(r.demo_type=p.data("demo-type")),void 0!==p.data("file-name")&&(r.file_name=p.data("file-name")),void 0!==p.data("demo-key")&&(r.demo_key=p.data("demo-key"))),r.demo_item_last=d,c.hasClass("importing")||c.hasClass("is-finished")||m.find(".modal-body").scrollTop(m.find(".modal-body").scrollTop()+c.position().top),c.addClass("importing");var v=t.post(ajaxurl,r,function(t){if(t.success){var e=parseFloat(g[0].style.width),p=e+o;if(void 0!==t.nextstep){var r=1;void 0===t.action_import&&(o/=2),void 0!==t.nextstep.total_step&&(r=d===n?t.nextstep.total_step:t.nextstep.total_step+1);var v=o/r;c.data("plzinst_import_ajax_current_step",v),p=e+v,g.css("width",p+"%"),a(t.nextstep,i,s,n,l,d)}else(d-=1)>0&&d<=n?(p=o*(n-d),g.css("width",p+"%"),c.removeClass("importing").addClass("is-finished"),a({},i,s,n,l,d)):(c.removeClass("importing").addClass("is-finished"),g.css("width","100%").addClass("bg-success"),c.data("plzinst_import_ajax_current_step",void 0),s.find(".js-plzinst-demo-item input[data-pack-type]:checked").prop("disabled"),m.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',function(){m.modal("hide")}),s.find(".js-plzinst-demo-item input[data-pack-type]:not(:checked)").removeProp("disabled"),i.removeClass("importing disabled"),m.find("[data-plzinst-stop-importing]").addClass("d-none"),u.html('<div class="alert alert-success rounded-0">'+t.message+"</div>"),m.find(".modal-body").scrollTop(u.position().top))}else{if(u.html('<div class="alert alert-danger rounded-0">'+t.message+"</div>"),m.find(".modal-body").scrollTop(u.position().top),m.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',function(){m.modal("hide")}),void 0!==c.data("plzinst_import_ajax_current_step")){var f=parseFloat(g[0].style.width)-c.data("plzinst_import_ajax_current_step");g.css("width",f+"%")}c.removeClass("importing"),s.find(".js-plzinst-demo-item input[data-pack-type]:not(:checked), .js-plzinst-demo-item input[data-pack-type]:not(.is-finished)").removeProp("disabled"),i.removeClass("importing disabled")}},"json").fail(function(t,a,e){if(u.html('<div class="alert alert-danger rounded-0">'+e+": "+t.responseText+"</div>"),m.find(".modal-body").scrollTop(u.position().top),m.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',function(){m.modal("hide")}),c.removeClass("importing"),void 0!==c.data("plzinst_import_ajax_current_step")){var n=parseFloat(g[0].style.width)-c.data("plzinst_import_ajax_current_step");g.css("width",n+"%")}s.find(".js-plzinst-demo-item input[data-pack-type]:not(:checked), .js-plzinst-demo-item input[data-pack-type]:not(.is-finished)").removeProp("disabled"),i.removeClass("importing disabled")});i.data("ajaxRequest",v)}}}({},e,s,l,d,l))}),t("[data-plzinst-stop-importing]").on("click",function(a){a.preventDefault();var e=t(".js-plzinst-import").data("ajaxRequest");void 0!==e&&(e.abort(),t(this).addClass("d-none"))})})}(jQuery);